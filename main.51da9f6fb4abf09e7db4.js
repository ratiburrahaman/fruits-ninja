/*! For license information please see main.51da9f6fb4abf09e7db4.js.LICENSE.txt */
!function(t){function e(e){for(var o,s,a=e[0],u=e[1],c=e[2],f=0,h=[];f<a.length;f++)s=a[f],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&h.push(r[s][0]),r[s]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(t[o]=u[o]);for(l&&l(e);h.length;)h.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,a=1;a<n.length;a++){var u=n[a];0!==r[u]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},r={0:0},i=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var a=window.webpackJsonp=window.webpackJsonp||[],u=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var l=u;i.push([121,1]),n()}({121:function(t,e,n){n(122),t.exports=n(310)},310:function(t,e,n){"use strict";n.r(e);n(308);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=u(t);if(e){var r=u(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(u,Phaser.Scene);var e,n,o,a=s(u);function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),a.call(this,{key:"BootScene"})}return e=u,(n=[{key:"preload",value:function(){this.load.image("bg_game","./assets/sprites/bg_game.jpg"),this.load.image("life","./assets/sprites/life.png"),this.load.image("but_exit","./assets/sprites/but_exit.png"),this.load.image("gameover_bg","./assets/sprites/gameover_bg.png"),this.load.image("button","./assets/sprites/but_play.png"),this.load.image("logo","./assets/sprites/logo.png");for(var t=1;t<=3;t++)this.load.image("glass_".concat(t),"./assets/sprites/glass-".concat(t,".png"));this.load.audio("fruit_slice_1",["./assets/audio/fruit_slice_1.mp3","./assets/audio/fruit_slice_1.ogg"]),this.load.audio("fruit_slice_2",["./assets/audio/fruit_slice_2.mp3","./assets/audio/fruit_slice_2.ogg"]),this.load.audio("fruit_slice_3",["./assets/audio/fruit_slice_3.mp3","./assets/audio/fruit_slice_3.ogg"]),this.load.audio("bomb_fuse",["./assets/audio/bomb_fuse.mp3","./assets/audio/bomb_fuse.ogg"]),this.load.audio("gameover_sound",["./assets/audio/gameover.mp3","./assets/audio/gameover.ogg"]),this.load.audio("soundtrack",["./assets/audio/soundtrack.mp3","./assets/audio/soundtrack.ogg"]),this.load.spritesheet("audio_icon","./assets/sprites/audio_icon.png",{frameWidth:81,frameHeight:80}),this.load.spritesheet("bomb","./assets/sprites/bomb.png",{frameWidth:150,frameHeight:150}),this.load.spritesheet("but_fullscreen","./assets/sprites/but_fullscreen.png",{frameWidth:81,frameHeight:80});for(var e=0;e<=1;e++)this.load.spritesheet("fruit_".concat(e),"./assets/sprites/fruit_".concat(e,".png"),{frameWidth:90,frameHeight:103});this.load.spritesheet("fruit_2","./assets/sprites/fruit_2.png",{frameWidth:100,frameHeight:122}),this.load.spritesheet("fruit_3","./assets/sprites/fruit_3.png",{frameWidth:87,frameHeight:90}),this.load.spritesheet("fruit_4","./assets/sprites/fruit_4.png",{frameWidth:83,frameHeight:105}),this.load.spritesheet("fruit_5","./assets/sprites/fruit_5.png",{frameWidth:200,frameHeight:200});for(var n=0;n<=5;n++)this.load.image("stain_".concat(n),"./assets/sprites/stain_".concat(n,".png"))}},{key:"create",value:function(){this.scene.start("MenuScene")}},{key:"update",value:function(){}}])&&r(e.prototype,n),o&&r(e,o),u}();function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var f={isSoundOn:!0,isGameOver:!1};function h(t){return t.sys.canvas.width/2}function p(t){return t.sys.canvas.height/2}function y(t){return t.sys.canvas.width}function d(t){return t.sys.canvas.height}function b(t,e,n){t.tweens.add({targets:e,duration:1500,angle:Phaser.Math.FloatBetween(-70,70)})}function m(t,e){t.tweens.add({targets:e,y:e.y-110,x:Phaser.Math.Between(e.x-50,e.x+50),alpha:0,onComplete:function(){e.destroy()}})}var v=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,o=[{key:"randomMinMax",value:function(t,e){return Math.random()*(e-t)+t}},{key:"calcParallel",value:function(t,e,n){var o={x:null,y:null};if(t.x==e.x)t.y-e.y>0?(o.x=t.x,o.y=t.y+n):(o.x=t.x,o.y=t.y-n);else{var r=(e.y-t.y)/(e.x-t.x);e.x-t.x<0?(o.x=t.x+n/Math.sqrt(1+r*r),o.y=t.y+n*r/Math.sqrt(1+r*r)):(o.x=t.x-n/Math.sqrt(1+r*r),o.y=t.y-n*r/Math.sqrt(1+r*r))}return o.x=Math.round(o.x),o.y=Math.round(o.y),new Phaser.Geom.Point(o.x,o.y)}},{key:"calcVertical",value:function(t,e,n,o){var r={x:null,y:null};if(t.y==e.y)r.x=e.x,o?e.x-t.x>0?r.y=e.y-n:r.y=e.y+n:e.x-t.x>0?r.y=e.y+n:r.y=e.y-n;else{var i=-(e.x-t.x)/(e.y-t.y);o?e.y-t.y>0?(r.x=e.x+n/Math.sqrt(1+i*i),r.y=e.y+n*i/Math.sqrt(1+i*i)):(r.x=e.x-n/Math.sqrt(1+i*i),r.y=e.y-n*i/Math.sqrt(1+i*i)):e.y-t.y>0?(r.x=e.x-n/Math.sqrt(1+i*i),r.y=e.y-n*i/Math.sqrt(1+i*i)):(r.x=e.x+n/Math.sqrt(1+i*i),r.y=e.y+n*i/Math.sqrt(1+i*i))}return r.x=Math.round(r.x),r.y=Math.round(r.y),new Phaser.Geom.Point(r.x,r.y)}}],(n=null)&&l(e.prototype,n),o&&l(e,o),t}();function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=S(t);if(e){var r=S(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return _(this,n)}}function _(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?P(t):e}function P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(i,Phaser.Physics.Arcade.Sprite);var e,n,o,r=w(i);function i(t,e,n){var o,s,a,u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o=r.call(this,t,e,n,"bomb",0),s=P(o),u=void 0,(a="bombSound")in s?Object.defineProperty(s,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):s[a]=u,o.scene.physics.world.enable(P(o)),o.scene.add.existing(P(o)),o.setDepth(3),o.body.setCircle(.5*o.width),o.play("bombAnim"),o.scene.tweens.add({targets:P(o),angle:Phaser.Math.FloatBetween(-280,280),duration:3e3}),o.bombSound=o.scene.sound.add("bomb_fuse"),f.isSoundOn&&o.bombSound.play(),o}return e=i,(n=[{key:"Destroy",value:function(){f.isSoundOn&&this.bombSound.stop()}}])&&O(e.prototype,n),o&&O(e,o),i}();function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=E(t);if(e){var r=E(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return G(this,n)}}function G(t,e){return!e||"object"!==j(e)&&"function"!=typeof e?B(t):e}function B(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function F(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(i,Phaser.Physics.Arcade.Sprite);var e,n,o,r=R(i);function i(t,e,n,o){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),F(B(s=r.call(this,t,e,n,"fruit_".concat(o),0)),"halfOne",void 0),F(B(s),"halfTwo",void 0),F(B(s),"isOverlap",void 0),F(B(s),"particleEffect",void 0),F(B(s),"effectColor",void 0),F(B(s),"effectKey",void 0),F(B(s),"isCutted",void 0),F(B(s),"fruitIndex",void 0),s.scene.physics.world.enable(B(s)),s.scene.add.existing(B(s)),s.setDepth(3),s.halfTwo=s.scene.physics.add.sprite(s.x,s.y,s.texture.key,2).setDepth(3).setVisible(!1),s.halfOne=s.scene.physics.add.sprite(s.x,s.y,s.texture.key,1).setDepth(3).setVisible(!1),s.body.setCircle(.5*s.width),s.fruitIndex=o,s}return e=i,(n=[{key:"SetOverlap",value:function(t){this.isOverlap=t}},{key:"cut",value:function(){f.isSoundOn&&this.scene.sound.play("fruit_slice_".concat(Phaser.Math.Between(1,3)));var t,e,n,o,r=this.scene.add.image(this.x,this.y,"stain_".concat(this.fruitIndex)).setDepth(2);t=this.scene,e=r,n=0,o=1e3,t.tweens.add({delay:100,targets:e,duration:o,alpha:n,onComplete:function(){e.destroy()}}),this.halfOne.setPosition(this.x,this.y).setVisible(!0),this.halfTwo.setPosition(this.x,this.y).setVisible(!0),this.visible=!1,b(this.scene,this.halfOne),b(this.scene,this.halfTwo),this.halfOne.body.velocity.x=-100+this.body.velocity.x,this.halfOne.body.velocity.y=this.body.velocity.y,this.halfOne.body.gravity.y=1500,this.halfTwo.body.velocity.x=100+this.body.velocity.x,this.halfTwo.body.velocity.y=this.body.velocity.y,this.halfTwo.body.gravity.y=1500,console.log("cut")}},{key:"preUpdate",value:function(t,e){f.isGameOver}}])&&M(e.prototype,n),o&&M(e,o),i}();function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=A(t);if(e){var r=A(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return q(this,n)}}function q(t,e){return!e||"object"!==I(e)&&"function"!=typeof e?z(t):e}function z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var W=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}(i,Phaser.Geom.Point);var e,n,o,r=D(i);function i(t,e){var n,o,s,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=r.call(this,t,e),o=z(n),a=void 0,(s="times")in o?Object.defineProperty(o,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[s]=a,n}return e=i,(n=[{key:"setTime",value:function(t){this.times=t}},{key:"Get_Time",value:function(){return this.times}}])&&V(e.prototype,n),o&&V(e,o),i}();function X(t){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e){return(Y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function N(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=J(t);if(e){var r=J(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return U(this,n)}}function U(t,e){return!e||"object"!==X(e)&&"function"!=typeof e?L(t):e}function L(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Y(t,e)}(n,Phaser.GameObjects.Text);var e=N(n);function n(t,o,r,i){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(s=e.call(this,t,o,r,i,{fontSize:"50px",fontFamily:"font",color:["#fc0303","#039129","#fffb00","#ffffff"][Phaser.Math.Between(0,3)]})).setDepth(4),s.scene.add.existing(L(s)),s}return n}();function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Z(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function $(t,e){return($=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=ot(t);if(e){var r=ot(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return et(this,n)}}function et(t,e){return!e||"object"!==Q(e)&&"function"!=typeof e?nt(t):e}function nt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ot(t){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var it=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$(t,e)}(i,Phaser.Scene);var e,n,o,r=tt(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),rt(nt(t=r.call(this,"GameScene")),"points",void 0),rt(nt(t),"blade",null),rt(nt(t),"graphics",null),rt(nt(t),"POINTLIFETIME",200),rt(nt(t),"allowBlade",void 0),rt(nt(t),"lastPoint",null),rt(nt(t),"fruitGravity",1e3),rt(nt(t),"fruitsGroup",void 0),rt(nt(t),"bombGroup",void 0),rt(nt(t),"mouseHandle",void 0),rt(nt(t),"scoreText",void 0),rt(nt(t),"score",void 0),rt(nt(t),"lifeText",void 0),rt(nt(t),"life",void 0),rt(nt(t),"bgm",void 0),t}return e=i,(n=[{key:"init",value:function(){this.points=[],this.blade=new Phaser.Geom.Polygon,this.graphics=this.add.graphics({x:0,y:0}),this.graphics.setDepth(9),this.score=0,this.life=3}},{key:"create",value:function(){var t,e=this;this.bgm=this.sound.add("soundtrack"),f.isSoundOn&&this.bgm.play(),(t=this.anims).create({key:"bombAnim",frames:t.generateFrameNumbers("bomb",{frames:[0,1]}),frameRate:10,repeat:-1}),this.fruitsGroup=this.add.group(),this.bombGroup=this.add.group(),this.add.image(h(this),p(this),"bg_game"),this.mouseHandle=this.physics.add.sprite(0,0,"fruit_1",0).setScale(.1).setAlpha(.02);var n=this.physics.add.image(h(this),d(this)+100,"bg_game").setScale(1,.06);this.input.on("pointerdown",(function(){e.allowBlade=!0})),this.input.on("pointerup",(function(){e.allowBlade=!1,e.points=[],e.graphics.clear()})),this.input.on("pointermove",(function(t){e.mouseHandle.x=t.x,e.mouseHandle.y=t.y})),this.time.addEvent({delay:1500,callback:function(){if(!f.isGameOver)if(e.score>500)if(Phaser.Math.Between(1,10)<3){e.addBomb();var t=Phaser.Math.Between(1,2);e.addFrtuis(t)}else{var n=Phaser.Math.Between(1,4);e.addFrtuis(n)}else{var o=Phaser.Math.Between(1,2);e.addFrtuis(o)}},repeat:-1}),this.scoreText=this.add.text(h(this),40,"SCORE ".concat(this.score),{fontSize:"45px",fontFamily:"font",color:"#ffcc00"}).setOrigin(.5),this.add.image(30,40,"life").setOrigin(0,.5),this.lifeText=this.add.text(140,40,"X".concat(this.life),{fontSize:"45px",fontFamily:"font",color:"#ffcc00"}).setOrigin(.5),this.add.image(y(this)-50,50,"but_exit").setInteractive({cursor:"pointer"}).on("pointerup",(function(){}));var o=this.add.sprite(y(this)-140,50,"audio_icon",f.isSoundOn?0:1).setInteractive({cursor:"pointer"}).on("pointerup",(function(){f.isSoundOn=!f.isSoundOn,o.setFrame(f.isSoundOn?0:1),f.isSoundOn?e.bgm.play():e.bgm.stop()})),r=this.add.image(y(this)-230,50,"but_fullscreen",0).setInteractive({cursor:"pointer"}).on("pointerup",(function(){e.scale.isFullscreen?(e.scale.stopFullscreen(),r.setFrame(0)):(e.scale.startFullscreen(),r.setFrame(1))}));this.physics.add.overlap(this.mouseHandle,this.fruitsGroup,(function(t,n){f.isGameOver||!n.isCutted&&e.allowBlade&&(n.isCutted=!0,e.addScore(n.x,n.y),n.cut())})),this.physics.add.overlap(this.mouseHandle,this.bombGroup,(function(t,n){!f.isGameOver&&e.allowBlade&&(console.log("Game over"),n.Destroy(),e.addGameOver(),f.isGameOver=!0)})),this.physics.add.overlap(n,this.fruitsGroup,(function(t,n){if(!n.isCutted&&n.body.velocity.y>50&&(n.destroy(),e.life>0)){e.life--,console.log(e.life);var o=new K(e,h(e),p(e)+100,"MISS!").setFontSize("80px");m(e,o),e.lifeText.text="X"+e.life,0==e.life&&(f.isGameOver||(console.log("Game over"),f.isGameOver=!0,e.addGameOver()))}})),this.physics.add.overlap(n,this.bombGroup,(function(t,e){e.body.velocity.y>50&&(e.Destroy(),e.destroy())}))}},{key:"addScore",value:function(t,e){var n=[10,30,40][Phaser.Math.Between(0,2)];m(this,new K(this,t,e,"+".concat(n))),this.score+=n,this.scoreText.text="SCORE ".concat(this.score)}},{key:"addFrtuis",value:function(t){for(var e=0;e<t;e++){var n=this.randomPosX(),o=this.randomPosY(),r=this.randomVelocityX(n),i=this.randomVelocityY(),s=new C(this,n,o,Phaser.Math.Between(0,5));s.body.velocity.x=r,s.body.velocity.y=i,s.body.gravity.y=this.fruitGravity,this.fruitsGroup.add(s)}}},{key:"addBomb",value:function(){var t=this.randomPosX(),e=this.randomPosY(),n=this.randomVelocityX(t),o=this.randomVelocityY(),r=new k(this,t,e);r.body.velocity.x=n,r.body.velocity.y=o,r.body.gravity.y=this.fruitGravity,this.bombGroup.add(r)}},{key:"addGameOver",value:function(){var t=this;f.isSoundOn&&this.sound.play("gameover_sound"),this.cameras.main.shake(1e3,.01),this.time.addEvent({delay:1e3,callback:function(){var e=t.add.container(h(t),p(t)).setDepth(5),n=t.add.image(0,0,"gameover_bg"),o=t.add.text(0,-130,"GAME OVER",{color:"#ffcc00",fontFamily:"font",fontSize:"80px",stroke:"#000000",strokeThickness:6,shadow:{blur:6,stroke:!0,color:"#000000",fill:!0}}).setOrigin(.5),r=t.add.text(0,50,"SCORE ".concat(t.score),{color:"#ffcc00",fontFamily:"font",fontSize:"50px",stroke:"#000000",strokeThickness:6,shadow:{blur:6,stroke:!0,color:"#000000",fill:!0}}).setOrigin(.5),i=t.add.image(0,350,"button").setInteractive({cursor:"pointer"}).on("pointerup",(function(){f.isGameOver=!1,t.bgm.stop(),t.scene.start("GameScene")})),s=t.add.text(0,340,"RESTART",{color:"#ffcc00",fontFamily:"font",fontSize:"40px",stroke:"#000000",strokeThickness:4,shadow:{blur:4,stroke:!0,color:"#000000",fill:!0}}).setOrigin(.5).setInteractive({cursor:"pointer"}).on("pointerup",(function(){f.isGameOver=!1,t.bgm.stop(),t.scene.start("GameScene")}));e.add([n,o,r,i,s])}})}},{key:"update",value:function(t,e){if(this.allowBlade){this.graphics.clear();var n=new W(this.input.activePointer.x,this.input.activePointer.y);if(this.lastPoint?(this.lastPoint.x,n.x*(this.lastPoint.x-n.x)+(this.lastPoint.y-n.y)*(this.lastPoint.y-n.x)>300&&(n.setTime((new Date).getTime()),this.points.push(n))):(this.lastPoint=n,n.setTime((new Date).getTime()),this.points.push(n)),this.points.length<1)return;if((new Date).getTime()-this.points[0].Get_Time()>this.POINTLIFETIME&&this.points.shift(),this.points.length<1)return;this.blade.setTo(this.generateBlade(this.points)),this.graphics.beginPath(),this.graphics.lineStyle(2,240124),this.graphics.fillStyle(16777215),this.graphics.moveTo(this.blade.points[1].x,this.blade.points[1].y),this.graphics.fillPoints(this.blade.points),this.graphics.strokePath()}}},{key:"randomPosX",value:function(){return v.randomMinMax(-100,y(this)+100)}},{key:"randomPosY",value:function(){return v.randomMinMax(100,200)+this.sys.canvas.height}},{key:"randomVelocityX",value:function(t){return t<0?v.randomMinMax(100,400):t>=0&&t<y(this)/2?v.randomMinMax(0,400):t>=y(this)/2&&t<y(this)?v.randomMinMax(-400,0):v.randomMinMax(-400,-100)}},{key:"randomVelocityY",value:function(){return v.randomMinMax(-1200,-1500)}},{key:"generateBlade",value:function(t){var e=[];if(!(t.length<=0)){if(1==t.length)e.push(new Phaser.Geom.Point(t[0].x-6,t[0].y)),e.push(new Phaser.Geom.Point(t[0].x,t[0].y-6)),e.push(new Phaser.Geom.Point(t[0].x+6,t[0].y)),e.push(new Phaser.Geom.Point(t[0].x,t[0].y+6));else{e.push(v.calcParallel(t[0],t[1],20));for(var n=0;n<t.length-1;n++)e.push(v.calcVertical(t[n+1],t[n],Math.round(13*n/(t.length-1)+2),!0));e.push(v.calcVertical(t[t.length-2],t[t.length-1],15,!1)),e.push(v.calcParallel(t[t.length-1],t[t.length-2],30)),e.push(v.calcVertical(t[t.length-2],t[t.length-1],15,!0));for(var o=t.length-1;o>0;o--)e.push(v.calcVertical(t[o],t[o-1],Math.round(13*(o-1)/(t.length-1)+2),!1))}return e}}}])&&Z(e.prototype,n),o&&Z(e,o),i}();function st(t){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ut(t,e){return(ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=ft(t);if(e){var r=ft(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return lt(this,n)}}function lt(t,e){return!e||"object"!==st(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ht=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ut(t,e)}(i,Phaser.Scene);var e,n,o,r=ct(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r.call(this,"MenuScene")}return e=i,(n=[{key:"init",value:function(){}},{key:"create",value:function(){var t=this,e=this.sound.add("soundtrack");f.isSoundOn&&e.play(),this.add.image(h(this),p(this),"bg_game"),this.add.image(h(this),300,"logo");var n=this.add.image(-400,p(this),"glass_1").setScale(.4),o=this.add.image(y(this)+400,p(this),"glass_2").setScale(.4),r=this.add.image(h(this),d(this)+400,"glass_3").setScale(.4);this.tweens.add({targets:n,x:200,duration:300}),this.tweens.add({targets:o,x:y(this)-200,duration:300,onComplete:function(){t.tweens.add({targets:r,y:p(t),duration:400,onComplete:function(){var e=t.add.text(h(t),d(t)-170,"Powered by NUYU",{fontSize:"45px",fontFamily:"font",color:"#ffcc00"}).setOrigin(.5).setScale(0);t.tweens.add({targets:e,scale:1,duration:300})}})}});var i=this.add.sprite(y(this)-60,50,"audio_icon",f.isSoundOn?0:1).setInteractive({cursor:"pointer"}).on("pointerup",(function(){f.isSoundOn=!f.isSoundOn,i.setFrame(f.isSoundOn?0:1),f.isSoundOn?e.play():e.stop()})),s=this.add.image(y(this)-140,50,"but_fullscreen",0).setInteractive({cursor:"pointer"}).on("pointerup",(function(){t.scale.isFullscreen?(t.scale.stopFullscreen(),s.setFrame(0)):(t.scale.startFullscreen(),s.setFrame(1))}));this.add.image(h(this),950,"button").setInteractive({cursor:"pointer"}).on("pointerup",(function(){e.destroy(),f.isGameOver=!1,t.scene.start("GameScene")})),this.add.text(h(this),940,"PLAY",{color:"#ffcc00",fontFamily:"font",fontSize:"40px",stroke:"#000000",strokeThickness:4,shadow:{blur:4,stroke:!0,color:"#000000",fill:!0}}).setOrigin(.5).setInteractive({cursor:"pointer"}).on("pointerup",(function(){f.isGameOver=!1,e.destroy(),t.scene.start("GameScene")}))}}])&&at(e.prototype,n),o&&at(e,o),i}(),pt={type:Phaser.AUTO,parent:"game",backgroundColor:"#001625",width:960,height:1260,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[c,ht,it]};new Phaser.Game(pt)}});